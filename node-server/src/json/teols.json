{  "size": 1,
   "fields":["fm_date"],
   "sort": {
      "fm_date": "desc"
   },
   "query": {
      "filtered": {
         "query": {
            "range": {
               "ls": {
                  "from": 1,
                  "to": 5
               }
            }
         },
         "filter": {
                   "prefix": {
                      "_id": "290011"
                  }
         }
      }
   },
   "aggregations": {
      "ls": {
         "histogram": {
            "field": "ls",
            "interval" : 1,
            "min_doc_count" : 0,
            "extended_bounds" : {
                    "min" : 0,
                    "max" : 550
            }
         },
         "aggs": {
            "events": {
               "sum": {
                  "field": "NEvents"
               }
            },
            "files": {
               "sum": {
                  "field": "NFiles"
               }
            },
            "time":{
                  "min": {"field":"fm_date"}
            }
         }
      },
      "sumbefore" : {
         "filter": {
            "range" : {
               "ls" : {
                  "from": 0,
                  "to" : 0
               }
            }
         },
         "aggs": {
           "events": {
             "sum": {
                  "field": "NEvents"
             }
           }
         }
      },
      "maxls" : {
        "max" : {
          "field":"ls"
        }
      }
   }
}
